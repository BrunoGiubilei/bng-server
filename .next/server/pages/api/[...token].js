"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/[...token]";
exports.ids = ["pages/api/[...token]"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "crypto-js":
/*!****************************!*\
  !*** external "crypto-js" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("crypto-js");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nextjs-cors":
/*!******************************!*\
  !*** external "nextjs-cors" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("nextjs-cors");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...token%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...token%5D.tsx&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...token%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...token%5D.tsx&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_token_tsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\[...token].tsx */ \"(api)/./src/pages/api/[...token].tsx\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_tsx__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_token_tsx__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/[...token]\",\n        pathname: \"/api/[...token]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_token_tsx__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRiU1Qi4uLnRva2VuJTVEJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUMlNUIuLi50b2tlbiU1RC50c3gmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmctc2VydmVyLz9iNWJhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXFsuLi50b2tlbl0udHN4XCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvWy4uLnRva2VuXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL1suLi50b2tlbl1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...token%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...token%5D.tsx&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/[...token].tsx":
/*!**************************************!*\
  !*** ./src/pages/api/[...token].tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handle)\n/* harmony export */ });\n/* harmony import */ var nextjs_cors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nextjs-cors */ \"nextjs-cors\");\n/* harmony import */ var nextjs_cors__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nextjs_cors__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto-js */ \"crypto-js\");\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_1__.PrismaClient();\nasync function handle(req, res) {\n    // Roda o middleware de CORS\n    await nextjs_cors__WEBPACK_IMPORTED_MODULE_0___default()(req, res, {\n        methods: [\n            \"GET\",\n            \"POST\",\n            \"PUT\"\n        ],\n        origin: \"http://localhost:5173\",\n        optionsSuccessStatus: 200\n    });\n    const { method } = req;\n    switch(method){\n        case \"GET\":\n            // Get all usuarios or a specific usuario if a token is provided\n            const queryToken = req.query.token !== undefined ? req.query.token : \"\";\n            const endpoint = queryToken[0];\n            const token = queryToken[1];\n            const isValid = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token, \"your-secret-key\");\n            if (isValid) {\n                if (token) {\n                    const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().decode(token);\n                    let id = 0;\n                    if (decoded instanceof Object && \"id\" in decoded) {\n                        id = decoded.id;\n                    }\n                    if (endpoint === \"usuarios\") {\n                        const usuario = await prisma.usuario.findUnique({\n                            where: {\n                                id: id\n                            }\n                        });\n                        let usuariosSemSenha = {};\n                        if (usuario) {\n                            usuariosSemSenha = {\n                                id: usuario.id,\n                                nome: usuario.nome,\n                                email: usuario.email,\n                                isAdmin: usuario.isAdmin\n                            };\n                        }\n                        res.json(usuariosSemSenha);\n                    } else if (endpoint === \"postagens\") {\n                        const postagens = await prisma.postagens.findMany();\n                        const postagensDoUsuario = postagens.filter((postagem)=>postagem.userId === id && postagem.dataExclusao === null);\n                        res.json(postagensDoUsuario);\n                    }\n                }\n            } else {\n                res.status(401).json({\n                    error: \"Token inv\\xe1lido\"\n                });\n            }\n            break;\n        case \"POST\":\n            // Authenticate a usuario or Create a new usuario\n            if (req.body.email && req.body.senha) {\n                const { email, senha } = req.body;\n                const usuario = await prisma.usuario.findUnique({\n                    where: {\n                        email\n                    }\n                });\n                if (!usuario) {\n                    res.status(401).json({\n                        error: \"Usu\\xe1rio n\\xe3o encontrado\"\n                    });\n                    return;\n                }\n                let senhac = crypto_js__WEBPACK_IMPORTED_MODULE_3___default().SHA256(usuario.senha + \"babanassaosaborosas\").toString();\n                const isValid = senha === senhac ? true : false;\n                if (!isValid) {\n                    res.status(401).json({\n                        error: \"Senha inv\\xe1lida\"\n                    });\n                    return;\n                }\n                const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().sign({\n                    id: usuario.id\n                }, \"your-secret-key\");\n                res.json({\n                    token\n                });\n            } else {\n                const newUsuario = await prisma.usuario.create({\n                    data: req.body\n                });\n                res.json(newUsuario);\n            }\n            break;\n        case \"PUT\":\n            // Update a usuario\n            const updatedUsuario = await prisma.usuario.update({\n                where: {\n                    id: req.body.id\n                },\n                data: req.body\n            });\n            res.json(updatedUsuario);\n            break;\n        default:\n            res.setHeader(\"Allow\", [\n                \"GET\",\n                \"POST\",\n                \"PUT\"\n            ]);\n            res.status(405).end(`Method ${method} Not Allowed`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBLE1BQU16QixRQUFRWix3REFBUSxDQUFDO29CQUFFbUIsSUFBSUUsUUFBUUYsRUFBRTtnQkFBQyxHQUFHO2dCQUMzQ2QsSUFBSXVCLElBQUksQ0FBQztvQkFBRWhCO2dCQUFNO1lBQ25CLE9BQU87Z0JBQ0wsTUFBTWdDLGFBQWEsTUFBTTFDLE9BQU9tQixPQUFPLENBQUN3QixNQUFNLENBQUM7b0JBQzdDQyxNQUFNMUMsSUFBSWtDLElBQUk7Z0JBQ2hCO2dCQUNBakMsSUFBSXVCLElBQUksQ0FBQ2dCO1lBQ1g7WUFDQTtRQUNGLEtBQUs7WUFDSCxtQkFBbUI7WUFDbkIsTUFBTUcsaUJBQWlCLE1BQU03QyxPQUFPbUIsT0FBTyxDQUFDMkIsTUFBTSxDQUFDO2dCQUNqRHpCLE9BQU87b0JBQUVKLElBQUlmLElBQUlrQyxJQUFJLENBQUNuQixFQUFFO2dCQUFDO2dCQUN6QjJCLE1BQU0xQyxJQUFJa0MsSUFBSTtZQUNoQjtZQUNBakMsSUFBSXVCLElBQUksQ0FBQ21CO1lBQ1Q7UUFDRjtZQUNFMUMsSUFBSTRDLFNBQVMsQ0FBQyxTQUFTO2dCQUFDO2dCQUFPO2dCQUFRO2FBQU07WUFDN0M1QyxJQUFJK0IsTUFBTSxDQUFDLEtBQUtjLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRXpDLE9BQU8sWUFBWSxDQUFDO0lBQ3REO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibmctc2VydmVyLy4vc3JjL3BhZ2VzL2FwaS9bLi4udG9rZW5dLnRzeD9kYjllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgTmV4dENvcnMgZnJvbSAnbmV4dGpzLWNvcnMnO1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5pbXBvcnQgQ3J5cHRvSlMgZnJvbSAnY3J5cHRvLWpzJztcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgLy8gUm9kYSBvIG1pZGRsZXdhcmUgZGUgQ09SU1xyXG4gIGF3YWl0IE5leHRDb3JzKHJlcSwgcmVzLCB7XHJcbiAgICBtZXRob2RzOiBbJ0dFVCcsICdQT1NUJywgJ1BVVCddLFxyXG4gICAgb3JpZ2luOiAnaHR0cDovL2xvY2FsaG9zdDo1MTczJyxcclxuICAgIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDAsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHsgbWV0aG9kIH0gPSByZXFcclxuXHJcbiAgc3dpdGNoIChtZXRob2QpIHtcclxuICAgIGNhc2UgJ0dFVCc6XHJcbiAgICAgIC8vIEdldCBhbGwgdXN1YXJpb3Mgb3IgYSBzcGVjaWZpYyB1c3VhcmlvIGlmIGEgdG9rZW4gaXMgcHJvdmlkZWRcclxuICAgICAgY29uc3QgcXVlcnlUb2tlbiA9IHJlcS5xdWVyeS50b2tlbiAhPT0gdW5kZWZpbmVkID8gcmVxLnF1ZXJ5LnRva2VuIDogJyc7XHJcbiAgICAgIGNvbnN0IGVuZHBvaW50ID0gcXVlcnlUb2tlblswXTtcclxuICAgICAgY29uc3QgdG9rZW4gPSBxdWVyeVRva2VuWzFdO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gand0LnZlcmlmeSh0b2tlbiwgJ3lvdXItc2VjcmV0LWtleScpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QuZGVjb2RlKHRva2VuKTtcclxuICAgICAgICAgIGxldCBpZDogbnVtYmVyID0gMDtcclxuICAgICAgXHJcbiAgICAgICAgICBpZiAoZGVjb2RlZCBpbnN0YW5jZW9mIE9iamVjdCAmJiAnaWQnIGluIGRlY29kZWQpIHtcclxuICAgICAgICAgICAgaWQgPSBkZWNvZGVkLmlkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZW5kcG9pbnQgPT09ICd1c3VhcmlvcycpIHtcclxuICAgICAgICAgICAgY29uc3QgdXN1YXJpbyA9IGF3YWl0IHByaXNtYS51c3VhcmlvLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogaWQgfSB9KTtcclxuICAgICAgICAgICAgbGV0IHVzdWFyaW9zU2VtU2VuaGEgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1c3VhcmlvKSB7XHJcbiAgICAgICAgICAgICAgdXN1YXJpb3NTZW1TZW5oYSA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiB1c3VhcmlvLmlkLFxyXG4gICAgICAgICAgICAgICAgbm9tZTogdXN1YXJpby5ub21lLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzdWFyaW8uZW1haWwsXHJcbiAgICAgICAgICAgICAgICBpc0FkbWluOiB1c3VhcmlvLmlzQWRtaW5cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXMuanNvbih1c3Vhcmlvc1NlbVNlbmhhKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoZW5kcG9pbnQgPT09ICdwb3N0YWdlbnMnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RhZ2VucyA9IGF3YWl0IHByaXNtYS5wb3N0YWdlbnMuZmluZE1hbnkoKTtcclxuICAgICAgICAgICAgY29uc3QgcG9zdGFnZW5zRG9Vc3VhcmlvID0gcG9zdGFnZW5zLmZpbHRlcihwb3N0YWdlbSA9PiBwb3N0YWdlbS51c2VySWQgPT09IGlkICYmIHBvc3RhZ2VtLmRhdGFFeGNsdXNhbyA9PT0gbnVsbCk7XHJcblxyXG4gICAgICAgICAgICByZXMuanNvbihwb3N0YWdlbnNEb1VzdWFyaW8pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVG9rZW4gaW52w6FsaWRvJyB9KTtcclxuICAgICAgfSAgICAgIFxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnUE9TVCc6XHJcbiAgICAgIC8vIEF1dGhlbnRpY2F0ZSBhIHVzdWFyaW8gb3IgQ3JlYXRlIGEgbmV3IHVzdWFyaW9cclxuICAgICAgaWYgKHJlcS5ib2R5LmVtYWlsICYmIHJlcS5ib2R5LnNlbmhhKSB7XHJcbiAgICAgICAgY29uc3QgeyBlbWFpbCwgc2VuaGEgfSA9IHJlcS5ib2R5O1xyXG4gICAgICAgIGNvbnN0IHVzdWFyaW8gPSBhd2FpdCBwcmlzbWEudXN1YXJpby5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KTtcclxuICAgICAgICBpZiAoIXVzdWFyaW8pIHtcclxuICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVc3XDoXJpbyBuw6NvIGVuY29udHJhZG8nIH0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgc2VuaGFjID0gQ3J5cHRvSlMuU0hBMjU2KHVzdWFyaW8uc2VuaGErJ2JhYmFuYXNzYW9zYWJvcm9zYXMnKS50b1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSAoc2VuaGEgPT09IHNlbmhhYyA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XHJcbiAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnU2VuaGEgaW52w6FsaWRhJyB9KTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IGlkOiB1c3VhcmlvLmlkIH0sICd5b3VyLXNlY3JldC1rZXknKTtcclxuICAgICAgICByZXMuanNvbih7IHRva2VuIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG5ld1VzdWFyaW8gPSBhd2FpdCBwcmlzbWEudXN1YXJpby5jcmVhdGUoe1xyXG4gICAgICAgICAgZGF0YTogcmVxLmJvZHksXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXMuanNvbihuZXdVc3VhcmlvKVxyXG4gICAgICB9XHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdQVVQnOlxyXG4gICAgICAvLyBVcGRhdGUgYSB1c3VhcmlvXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc3VhcmlvID0gYXdhaXQgcHJpc21hLnVzdWFyaW8udXBkYXRlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogcmVxLmJvZHkuaWQgfSxcclxuICAgICAgICBkYXRhOiByZXEuYm9keSxcclxuICAgICAgfSlcclxuICAgICAgcmVzLmpzb24odXBkYXRlZFVzdWFyaW8pXHJcbiAgICAgIGJyZWFrXHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJywgJ1BPU1QnLCAnUFVUJ10pXHJcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke21ldGhvZH0gTm90IEFsbG93ZWRgKVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dENvcnMiLCJQcmlzbWFDbGllbnQiLCJqd3QiLCJDcnlwdG9KUyIsInByaXNtYSIsImhhbmRsZSIsInJlcSIsInJlcyIsIm1ldGhvZHMiLCJvcmlnaW4iLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsIm1ldGhvZCIsInF1ZXJ5VG9rZW4iLCJxdWVyeSIsInRva2VuIiwidW5kZWZpbmVkIiwiZW5kcG9pbnQiLCJpc1ZhbGlkIiwidmVyaWZ5IiwiZGVjb2RlZCIsImRlY29kZSIsImlkIiwiT2JqZWN0IiwidXN1YXJpbyIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInVzdWFyaW9zU2VtU2VuaGEiLCJub21lIiwiZW1haWwiLCJpc0FkbWluIiwianNvbiIsInBvc3RhZ2VucyIsImZpbmRNYW55IiwicG9zdGFnZW5zRG9Vc3VhcmlvIiwiZmlsdGVyIiwicG9zdGFnZW0iLCJ1c2VySWQiLCJkYXRhRXhjbHVzYW8iLCJzdGF0dXMiLCJlcnJvciIsImJvZHkiLCJzZW5oYSIsInNlbmhhYyIsIlNIQTI1NiIsInRvU3RyaW5nIiwic2lnbiIsIm5ld1VzdWFyaW8iLCJjcmVhdGUiLCJkYXRhIiwidXBkYXRlZFVzdWFyaW8iLCJ1cGRhdGUiLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/[...token].tsx\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2F%5B...token%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5C%5B...token%5D.tsx&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();